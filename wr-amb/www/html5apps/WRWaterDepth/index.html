<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
	<!--
    <script src="/usr/share/tizen-web-ui-fw/latest/js/jquery.js"></script>
    <script src="/usr/share/tizen-web-ui-fw/latest/js/tizen-web-ui-fw-libs.js"></script>
	<script src="/usr/share/tizen-web-ui-fw/latest/js/tizen-web-ui-fw.js"
		data-framework-viewport-scale=false>
		-->
    <script src="/opt/windriver/share/tizen-web-ui-fw/latest/js/jquery.js"></script>
    <script src="/opt/windriver/share/tizen-web-ui-fw/latest/js/tizen-web-ui-fw-libs.js"></script>
	<script src="/opt/windriver/share/tizen-web-ui-fw/latest/js/tizen-web-ui-fw.js"
		data-framework-viewport-scale=false>
	</script>

    <title>GENIVI HVAC</title>

    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <script src="js/main.js"></script>
    <script src="js/gsocket.js"></script>
    <script>
	function wdInit() {
    		console.log("water depth init");
    		$(document).keydown(function (event) {
    			console.log("key down: " + event.which + " " + event.keyCode);
    			var keycode;
				var socket_controller;
    			if (event.which) {
    				keycode = event.which;
    				if (keycode == 38) {
    					cb_fanUp();
    				} else if (keycode == 40) {
    					cb_fanDown();
    				} else if ((keycode == 37) || (keycode == 39)) {
    					cb_AutoManual();
    				} else if (keycode == 13) {
    					cb_acOnOff();
    				}
    			} else if (event.keyCode) {
    				keycode = event.which;
    				if (keycode == 38) {
    					cb_fanUp();
    				} else if (keycode == 40) {
    					cb_fanDown();
    				} else if ((keycode == 37) || (keycode == 39)) {
    					cb_AutoManual();
    				} else if (keycode == 13) {
    					cb_acOnOff();
    				}
    			}
    		});

			socket_controller = new SocketController();
			socket_controller.initialize();

			console.log($(window).width() + " " + $(window).height());
			document.getElementById("main").style.backgroundSize = $(window).width() + "px " + $(window).height() + "px";
    	}
    	$(document).delegate("#main", "pageinit", function() {
				$("#main .ui-btn-back").bind("vclick", function() {
					console.log("click back")
					tizen.application.getCurrentApplication().exit();
  					return false;
  				});
  			});

		var direction = 1;
		var degree = 0;
		var inc = 5;
		var interval = 3000;
		var maxdegree = 15;
		function rotate() {
			console.log('rotate '+degree);
			var deg = degree;
			var vog = document.getElementById('vehicle-on-ground');
			var fixblock = document.getElementById('fixblock');
			var ground = document.getElementById('ground');
    		vog.style.webkitTransitionDuration = (interval/1000.0)+'s';
			vog.style.webkitTransform = 'rotate('+deg+'deg)';
    		fixblock.style.webkitTransitionDuration = (interval/1000.0)+'s';
			fixblock.style.webkitTransform = 'rotate('+(deg*-1)+'deg)';
			degree += inc*direction;
			if(direction==1 && degree >= maxdegree)
				direction = -1;
			else if(direction==-1 && degree <= -maxdegree)
				direction = 1;
			ground.style.webkitTransform = 'rotate(0deg)';
			setTimeout(rotate, interval);
		}
		setTimeout(rotate, 0);
    </script>
</head>

<body onload="wdInit()">
	<!-- <div data-role="page" id="main" data-add-back-btn="footer"> -->
	<div data-role="page" id="main">
		<span class="text" style="left: 5%; top: 6%">Water Depth View (Demo)</span>
		<!--<img id="logo" src="images/windrover.png">-->
		<div id="vehicle-on-ground">
			<img id="vehicle" src="images/rr.png">
			<div id="fixblock">
				<div id="maxline"></div>
				<div style="height: 300px"></div>
				<div id="water"></div>
			</div>
			<div id="ground"></div>
		</div>
		<span class="text" style="left: 5%; top: 53%; ">Max</span>
	</div>
</body>
</html>
